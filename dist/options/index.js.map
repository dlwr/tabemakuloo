{"version":3,"file":"index.js","sources":["../../src/options/index.ts"],"sourcesContent":["import browser from 'webextension-polyfill'\n\nclass OptionsUI {\n  private readonly saveButton: HTMLButtonElement\n\n  constructor() {\n    this.saveButton = document.querySelector('#saveBtn')!\n    void this.init()\n  }\n\n  private async init(): Promise<void> {\n    await this.loadSettings()\n    this.setupEventListeners()\n  }\n\n  private async loadSettings(): Promise<void> {\n    try {\n      const settings = await browser.storage.sync.get('services')\n      const services = settings.services || {}\n\n      // Update UI based on stored settings\n      for (const [serviceId, enabled] of Object.entries(services)) {\n        const checkbox = document.querySelector(`#${serviceId}`) as HTMLInputElement\n        if (checkbox) {\n          checkbox.checked = Boolean(enabled)\n          this.updateServiceItem(serviceId, Boolean(enabled))\n        }\n      }\n    } catch (error) {\n      console.error('Failed to load settings:', error)\n    }\n  }\n\n  private setupEventListeners(): void {\n    this.saveButton.addEventListener('click', this.saveSettings.bind(this))\n\n    // Listen for service toggle changes\n    const serviceCheckboxes = document.querySelectorAll('.service-toggle input')\n    for (const checkbox of serviceCheckboxes) {\n      checkbox.addEventListener('change', this.handleServiceToggle.bind(this))\n    }\n  }\n\n  private handleServiceToggle(event: Event): void {\n    const checkbox = event.target as HTMLInputElement\n    const serviceId = checkbox.id\n    const enabled = checkbox.checked\n\n    this.updateServiceItem(serviceId, enabled)\n  }\n\n  private updateServiceItem(serviceId: string, enabled: boolean): void {\n    const serviceItem = document.querySelector(`#${serviceId}`)?.closest('.service-item')\n    if (serviceItem) {\n      if (enabled) {\n        serviceItem.classList.add('enabled')\n      } else {\n        serviceItem.classList.remove('enabled')\n      }\n    }\n  }\n\n  private async saveSettings(): Promise<void> {\n    try {\n      const services: Record<string, boolean> = {}\n      const checkboxes = document.querySelectorAll('.service-toggle input')\n\n      for (const checkbox of checkboxes) {\n        const input = checkbox as HTMLInputElement\n        services[input.id] = input.checked\n      }\n\n      await browser.storage.sync.set({services})\n\n      // Visual feedback\n      this.saveButton.textContent = '保存完了！'\n      this.saveButton.style.background = '#28a745'\n\n      setTimeout(() => {\n        this.saveButton.textContent = '設定を保存'\n        this.saveButton.style.background = '#007bff'\n      }, 2000)\n    } catch (error) {\n      console.error('Failed to save settings:', error)\n      this.saveButton.textContent = '保存失敗'\n      this.saveButton.style.background = '#dc3545'\n\n      setTimeout(() => {\n        this.saveButton.textContent = '設定を保存'\n        this.saveButton.style.background = '#007bff'\n      }, 2000)\n    }\n  }\n}\n\nvoid new OptionsUI()\n"],"names":["OptionsUI","__publicField","services","browser","serviceId","enabled","checkbox","error","serviceCheckboxes","event","serviceItem","_a","checkboxes","input"],"mappings":"oRAEA,MAAMA,CAAU,CAGd,aAAc,CAFGC,EAAA,mBAGf,KAAK,WAAa,SAAS,cAAc,UAAU,EAC9C,KAAK,KAAA,CAAK,CAGjB,MAAc,MAAsB,CAClC,MAAM,KAAK,aAAA,EACX,KAAK,oBAAA,CAAoB,CAG3B,MAAc,cAA8B,CAC1C,GAAI,CAEF,MAAMC,GADW,MAAMC,EAAQ,QAAQ,KAAK,IAAI,UAAU,GAChC,UAAY,CAAA,EAGtC,SAAW,CAACC,EAAWC,CAAO,IAAK,OAAO,QAAQH,CAAQ,EAAG,CAC3D,MAAMI,EAAW,SAAS,cAAc,IAAIF,CAAS,EAAE,EACnDE,IACFA,EAAS,QAAU,EAAQD,EAC3B,KAAK,kBAAkBD,EAAW,EAAQC,CAAQ,EACpD,CACF,OACOE,EAAO,CACd,QAAQ,MAAM,2BAA4BA,CAAK,CAAA,CACjD,CAGM,qBAA4B,CAClC,KAAK,WAAW,iBAAiB,QAAS,KAAK,aAAa,KAAK,IAAI,CAAC,EAGtE,MAAMC,EAAoB,SAAS,iBAAiB,uBAAuB,EAC3E,UAAWF,KAAYE,EACrBF,EAAS,iBAAiB,SAAU,KAAK,oBAAoB,KAAK,IAAI,CAAC,CACzE,CAGM,oBAAoBG,EAAoB,CAC9C,MAAMH,EAAWG,EAAM,OACjBL,EAAYE,EAAS,GACrBD,EAAUC,EAAS,QAEzB,KAAK,kBAAkBF,EAAWC,CAAO,CAAA,CAGnC,kBAAkBD,EAAmBC,EAAwB,OACnE,MAAMK,GAAcC,EAAA,SAAS,cAAc,IAAIP,CAAS,EAAE,IAAtC,YAAAO,EAAyC,QAAQ,iBACjED,IACEL,EACFK,EAAY,UAAU,IAAI,SAAS,EAEnCA,EAAY,UAAU,OAAO,SAAS,EAE1C,CAGF,MAAc,cAA8B,CAC1C,GAAI,CACF,MAAMR,EAAoC,CAAA,EACpCU,EAAa,SAAS,iBAAiB,uBAAuB,EAEpE,UAAWN,KAAYM,EAAY,CACjC,MAAMC,EAAQP,EACdJ,EAASW,EAAM,EAAE,EAAIA,EAAM,OAAA,CAG7B,MAAMV,EAAQ,QAAQ,KAAK,IAAI,CAAC,SAAAD,EAAS,EAGzC,KAAK,WAAW,YAAc,QAC9B,KAAK,WAAW,MAAM,WAAa,UAEnC,WAAW,IAAM,CACf,KAAK,WAAW,YAAc,QAC9B,KAAK,WAAW,MAAM,WAAa,SAAA,EAClC,GAAI,CAAA,OACAK,EAAO,CACd,QAAQ,MAAM,2BAA4BA,CAAK,EAC/C,KAAK,WAAW,YAAc,OAC9B,KAAK,WAAW,MAAM,WAAa,UAEnC,WAAW,IAAM,CACf,KAAK,WAAW,YAAc,QAC9B,KAAK,WAAW,MAAM,WAAa,SAAA,EAClC,GAAI,CAAA,CACT,CAEJ,CAEK,IAAIP"}