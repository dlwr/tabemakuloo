var a=Object.defineProperty;var d=(n,e,t)=>e in n?a(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var i=(n,e,t)=>d(n,typeof e!="symbol"?e+"":e,t);import"../chunks/modulepreload-polyfill.B5Qt9EMX.js";import{b as r}from"../chunks/browser-polyfill.DX5UB71L.js";class l{constructor(){i(this,"saveButton");this.saveButton=document.querySelector("#saveBtn"),this.init()}async init(){await this.loadSettings(),this.setupEventListeners()}async loadSettings(){try{const t=(await r.storage.sync.get("services")).services||{};for(const[s,o]of Object.entries(t)){const c=document.querySelector(`#${s}`);c&&(c.checked=!!o,this.updateServiceItem(s,!!o))}}catch(e){console.error("Failed to load settings:",e)}}setupEventListeners(){this.saveButton.addEventListener("click",this.saveSettings.bind(this));const e=document.querySelectorAll(".service-toggle input");for(const t of e)t.addEventListener("change",this.handleServiceToggle.bind(this))}handleServiceToggle(e){const t=e.target,s=t.id,o=t.checked;this.updateServiceItem(s,o)}updateServiceItem(e,t){var o;const s=(o=document.querySelector(`#${e}`))==null?void 0:o.closest(".service-item");s&&(t?s.classList.add("enabled"):s.classList.remove("enabled"))}async saveSettings(){try{const e={},t=document.querySelectorAll(".service-toggle input");for(const s of t){const o=s;e[o.id]=o.checked}await r.storage.sync.set({services:e}),this.saveButton.textContent="保存完了！",this.saveButton.style.background="#28a745",setTimeout(()=>{this.saveButton.textContent="設定を保存",this.saveButton.style.background="#007bff"},2e3)}catch(e){console.error("Failed to save settings:",e),this.saveButton.textContent="保存失敗",this.saveButton.style.background="#dc3545",setTimeout(()=>{this.saveButton.textContent="設定を保存",this.saveButton.style.background="#007bff"},2e3)}}}new l;
//# sourceMappingURL=index.js.map
